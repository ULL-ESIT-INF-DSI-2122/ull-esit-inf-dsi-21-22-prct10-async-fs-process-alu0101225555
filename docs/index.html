<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>ull-esit-inf-dsi-21-22-prct09-filesystem-notes-app-alu0101225555</title><meta name="description" content="Documentation for ull-esit-inf-dsi-21-22-prct09-filesystem-notes-app-alu0101225555"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">ull-esit-inf-dsi-21-22-prct09-filesystem-notes-app-alu0101225555</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1> ull-esit-inf-dsi-21-22-prct09-filesystem-notes-app-alu0101225555 </h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#práctica-10" id="práctica-10" style="color: inherit; text-decoration: none;">
  <h3>Práctica 10</h3>
</a>
<p>Noelia Ibáñez Silvestre</p>
<p>alu0101225555</p>
<p><a href="https://coveralls.io/github/ULL-ESIT-INF-DSI-2122/ull-esit-inf-dsi-21-22-prct10-async-fs-process-alu0101225555?branch=main"><img src="https://coveralls.io/repos/github/ULL-ESIT-INF-DSI-2122/ull-esit-inf-dsi-21-22-prct10-async-fs-process-alu0101225555/badge.svg?branch=main" alt="Coverage Status"></a></p>
<p><a href="https://github.com/ULL-ESIT-INF-DSI-2122/ull-esit-inf-dsi-21-22-prct10-async-fs-process-alu0101225555/actions/workflows/node.js.yml"><img src="https://github.com/ULL-ESIT-INF-DSI-2122/ull-esit-inf-dsi-21-22-prct10-async-fs-process-alu0101225555/actions/workflows/node.js.yml/badge.svg?branch=master" alt="Tests"></a></p>
<p><a href="https://github.com/ULL-ESIT-INF-DSI-2122/ull-esit-inf-dsi-21-22-prct10-async-fs-process-alu0101225555/actions/workflows/sonarcloud.yml"><img src="https://github.com/ULL-ESIT-INF-DSI-2122/ull-esit-inf-dsi-21-22-prct10-async-fs-process-alu0101225555/actions/workflows/sonarcloud.yml/badge.svg?branch=master" alt="Sonar-Cloud"></a></p>

<a href="#ejercicio-1" id="ejercicio-1" style="color: inherit; text-decoration: none;">
  <h2>Ejercicio 1</h2>
</a>
<p><strong>Desarrollo:</strong></p>
<p><em>Paso 0:</em> Se inician todas las colas vacías.</p>
<p>|   Stack   |   API     |   Queue   |   Output  |
|:---------------------------------------------:|</p>
<p><em>Paso 1:</em> La función <code>main</code> anónima entra en la pila.</p>
<p>|   Stack   |   API     |   Queue   |   Output  |
|:---------------------------------------------:|
|   <code>main()</code>|           |           |           |</p>
<p><em>Paso 2:</em> Las librerías y los argumentos son cargados. Además, se introduce <code>access</code> en la API. </p>
<p>|   Stack   |   API     |   Queue   |   Output  |
|:---------------------------------------------:|
|   <code>main()</code>| <code>access()</code>|           |           |</p>
<p><em>Paso 3:</em> Cuando la función <code>main</code> termina, <code>access</code> sale de la API y el <code>callback</code> entra en la cola de las tareas (<code>Queue</code>).</p>
<p>|   Stack   |   API     |   Queue       |   Output  |
|:-------------------------------------------------:|
|           |           |<code>callback()</code>   |           |</p>
<p><em>Paso 4:</em> <code>callback</code> entra en la pila para ejecutar la función y retornar el valor.</p>
<p>|   Stack                                           |   API     |   Queue       |   Output  |
|:-----------------------------------------------------------------------------------------:|
|<code>callback()</code>                                       |           |               |           |
|console.log(<code>Starting to watch file ${filename}</code>); |           |               |           |</p>
<p><em>Paso 5:</em> <code>Output</code> retorna el valor calculado en la función que estaba en la pila.</p>
<p>|   Stack       |   API     |   Queue       |   Output                                          |
|:---------------------------------------------------------------------------------------------:|
|<code>callback()</code>   |           |               |                                                   |
|               |           |               |console.log(<code>Starting to watch file ${filename}</code>); |</p>
<p><em>Paso 6:</em> Entra <code>watch</code> en la pila para ejecutarse.</p>
<p>|   Stack                                           |   API     |   Queue       |   Output  |
|:-----------------------------------------------------------------------------------------:|
|<code>callback()</code>                                       |           |               |           |
|<code>watch()</code>                                          |           |               |           |</p>
<p><em>Paso 7:</em> Una vez se ejecuta <code>watch</code>, llama a <code>watcher.on</code> y la añade a la API.</p>
<p>|   Stack                                           |   API         |   Queue  |   Output   |
|:-----------------------------------------------------------------------------------------:|
|<code>callback()</code>                                       |<code>watcher.on()</code> |          |            |</p>
<p><em>Paso 8:</em> Se añade y ejecuta la siguiente función en la pila.</p>
<p>|   Stack                                               |   API     |   Queue       |   Output  |
|:---------------------------------------------------------------------------------------------:|
|<code>callback()</code>                                           |           |               |           |
|console.log(<code>File ${filename} is no longer watched</code>);  |           |               |           |</p>
<p><em>Paso 9:</em> Se retorna el valor en <code>output</code>.</p>
<p>|   Stack       |   API     |   Queue       |   Output                                              |
|:-------------------------------------------------------------------------------------------------:|
|<code>callback()</code>   |           |               |                                                       |
|               |           |               |console.log(<code>File ${filename} is no longer watched</code>);  |</p>
<p><em>Paso 10:</em> <code>watcher.on</code> se convierte en <code>callback</code> y pasa a la cola para ejecutarse.</p>
<p>|   Stack   |   API     |   Queue       |   Output  |
|:-------------------------------------------------:|
|           |           |<code>callback()</code>   |           |</p>
<p><em>Paso 11:</em> Se añade el <code>callback</code> en la pila, ya que está vacía, y se ejecuta.</p>
<p>|   Stack       |   API     |   Queue       |   Output  |
|:-----------------------------------------------------:|
|<code>callback()</code>   |           |               |           |</p>
<p><em>Paso 12:</em> Se añade la siguiente función a la pila y se ejecuta.</p>
<p>|   Stack                                                   |   API     |   Queue       |   Output  |
|:-------------------------------------------------------------------------------------------------:|
|<code>callback()</code>                                               |           |               |           |
|console.log(<code>File ${filename} has been modified somehow</code>); |           |               |           |</p>
<p><em>Paso 13:</em> La función que se ejecutó, retorna el valor en el <code>output</code>.</p>
<p>|   Stack       |   API     |   Queue       |   Output                                                  |
|:-----------------------------------------------------------------------------------------------------:|
|<code>callback()</code>   |           |               |                                                           |
|               |           |               |console.log(<code>File ${filename} has been modified somehow</code>); |</p>
<ul>
<li><p>¿Qué hace la función <code>access</code>?: Prueba los permisos de un usuario para el archivo o directorio especificado en la ruta que le pasamos.</p>
</li>
<li><p>¿Para qué sirve el objeto <code>constants</code>?: &quot;Devuelve un objeto que contiene constantes de uso común para el sistema de archivos operaciones&quot;. Es decir, nos garantiza poder acceder de manera predefinida al item (ejemplo: indicándole el archivo que queremos, el modo en el que queremos acceder....)</p>
</li>
</ul>

<a href="#ejercicio-3" id="ejercicio-3" style="color: inherit; text-decoration: none;">
  <h2>Ejercicio 3</h2>
</a>
<p><strong>Desarrollo:</strong></p>
<p>Para la resolución de este ejercicio hemos partido de la práctica 9. La principal diferencia es que este sólo ejecuta la opción <code>watch</code> implementada en el <code>main.ts</code>, donde se le pasa una ruta cómo parámetro:</p>
<pre><code><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">FM</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-3">OperacionesNotas</span><span class="hl-1">();</span><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Comando &#39;watch&#39;: observa cambios en directorio</span><br/><span class="hl-4"> */</span><br/><span class="hl-1"> </span><span class="hl-5">yargs</span><span class="hl-1">.</span><span class="hl-3">command</span><span class="hl-1">( {</span><br/><span class="hl-1">    </span><span class="hl-5">command:</span><span class="hl-1"> </span><span class="hl-6">&#39;watch&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Observa cambios en un fichero&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">builder:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">route:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Ruta para observar&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">demandOption:</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-3">handler</span><span class="hl-1">(</span><span class="hl-5">argv</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-0">typeof</span><span class="hl-1"> </span><span class="hl-5">argv</span><span class="hl-1">.</span><span class="hl-5">route</span><span class="hl-1"> === </span><span class="hl-6">&quot;string&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-2">FM</span><span class="hl-1">.</span><span class="hl-3">watch</span><span class="hl-1">(</span><span class="hl-5">argv</span><span class="hl-1">.</span><span class="hl-5">route</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><span class="hl-7">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-6">`ERROR`</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">yargs</span><span class="hl-1">.</span><span class="hl-3">parse</span><span class="hl-1">();</span>
</code></pre>
<p>Además, hemos añadido la función <code>watch()</code> en <code>OpcionesNotas.ts</code> que será a la que llame el comando con mismo nombre. Dicho método muestra los cambios que sufre el directorio que pasamos como parámetro hasta que finalizamos el programa.</p>
<pre><code><span class="hl-4">/**</span><br/><span class="hl-4">     * Método para &quot;vigilar&quot; cambios en el directorio</span><br/><span class="hl-4">     * </span><span class="hl-0">@param</span><span class="hl-4"> </span><span class="hl-5">ruta</span><span class="hl-4"> ruta para analizar</span><br/><span class="hl-4">     */</span><br/><span class="hl-1">    </span><span class="hl-3">watch</span><span class="hl-1">(</span><span class="hl-5">ruta</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">rutaExistente</span><span class="hl-1">: </span><span class="hl-8">boolean</span><span class="hl-1"> = </span><span class="hl-3">existsSync</span><span class="hl-1">(</span><span class="hl-5">ruta</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">direcc</span><span class="hl-1"> = </span><span class="hl-5">ruta</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">fichero</span><span class="hl-1"> = </span><span class="hl-5">fs</span><span class="hl-1">.</span><span class="hl-3">readdirSync</span><span class="hl-1">(</span><span class="hl-5">direcc</span><span class="hl-1">);</span><br/><br/><span class="hl-1">        </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-5">rutaExistente</span><span class="hl-1"> == </span><span class="hl-0">true</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-5">fs</span><span class="hl-1">.</span><span class="hl-3">watch</span><span class="hl-1">(</span><span class="hl-5">direcc</span><span class="hl-1">, (</span><span class="hl-5">event</span><span class="hl-1">: </span><span class="hl-8">any</span><span class="hl-1">, </span><span class="hl-5">cont</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-6">`Se están produciendo cambios`</span><span class="hl-1">);</span><br/><span class="hl-1">                </span><span class="hl-7">switch</span><span class="hl-1"> (</span><span class="hl-5">event</span><span class="hl-1">) {</span><br/><span class="hl-1">                    </span><span class="hl-7">case</span><span class="hl-1"> </span><span class="hl-6">&#39;cambio&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">                        </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-6">`Se ha modificado el fichero`</span><span class="hl-1"> + </span><span class="hl-5">cont</span><span class="hl-1">);</span><br/><span class="hl-1">                        </span><span class="hl-7">break</span><span class="hl-1">;</span><br/><span class="hl-1">                    </span><span class="hl-7">case</span><span class="hl-1"> </span><span class="hl-6">&#39;renombrar&#39;</span><span class="hl-1">:</span><br/><span class="hl-1">                        </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">existeFich</span><span class="hl-1">: </span><span class="hl-8">boolean</span><span class="hl-1"> = </span><span class="hl-3">existsSync</span><span class="hl-1">(</span><span class="hl-6">`</span><span class="hl-0">${</span><span class="hl-5">ruta</span><span class="hl-0">}</span><span class="hl-6">/</span><span class="hl-0">${</span><span class="hl-5">cont</span><span class="hl-0">}</span><span class="hl-6">`</span><span class="hl-1">);</span><br/><span class="hl-1">                        </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-5">existeFich</span><span class="hl-1"> == </span><span class="hl-0">true</span><span class="hl-1">) {</span><br/><span class="hl-1">                            </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-6">`Se ha añadidio el fichero`</span><span class="hl-1"> + </span><span class="hl-5">cont</span><span class="hl-1">);</span><br/><span class="hl-1">                        }</span><span class="hl-7">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                            </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-6">`Se ha eliminado el fichero`</span><span class="hl-1"> + </span><span class="hl-5">cont</span><span class="hl-1">);</span><br/><span class="hl-1">                        }</span><br/><span class="hl-1">                        </span><span class="hl-7">break</span><span class="hl-1">;</span><br/><span class="hl-1">                }</span><br/><span class="hl-1">    </span><br/><span class="hl-1">                </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-6">`El contenido del fichero es: `</span><span class="hl-1"> + </span><span class="hl-5">fichero</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><br/><span class="hl-1">            })</span><br/><br/><span class="hl-1">        }</span><span class="hl-7">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-6">`ERROR. La ruta no existe`</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><br/><span class="hl-1">    }</span>
</code></pre>
<ul>
<li><p>¿Cómo haría para mostrar, no solo el nombre, sino también el contenido del fichero, en el caso de que haya sido creado o modificado?: Llamando a alguna función que se encargue de leer el contenido y lo muestre cada vez que detecta cambios.</p>
</li>
<li><p>¿Cómo haría para que no solo se observase el directorio de un único usuario sino todos los directorios correspondientes a los diferentes usuarios de la aplicación de notas?: Iniciando el método watch() en cada directorio posible a la vez.</p>
</li>
</ul>

<a href="#ejercicio-4" id="ejercicio-4" style="color: inherit; text-decoration: none;">
  <h2>Ejercicio 4</h2>
</a>
<p><strong>Desarrollo:</strong></p>
<p>Para llevar a cabo este ejercicio, hemos creado 2 ficheros que explicaremos a continuación.</p>
<ul>
<li><em>main.ts:</em></li>
</ul>
<p>Es el programa principal, se encarga de analizar el comando que introducimos por la línea de comando y llamar a la función correspondiente:</p>
<pre><code><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">comands</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-5">LComands</span><span class="hl-1">;</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Comando &#39;check&#39;: comprueba si es fichero o directorio</span><br/><span class="hl-4"> */</span><br/><span class="hl-5">yargs</span><span class="hl-1">.</span><span class="hl-3">command</span><span class="hl-1">( {</span><br/><span class="hl-1">    </span><span class="hl-5">command:</span><span class="hl-1"> </span><span class="hl-6">&#39;check&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Verifica si es un fichero o un directorio&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">builder:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">route:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Ruta a verificar&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">demandOption:</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-3">handler</span><span class="hl-1">(</span><span class="hl-5">argv</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-0">typeof</span><span class="hl-1"> </span><span class="hl-5">argv</span><span class="hl-1">.</span><span class="hl-5">route</span><span class="hl-1"> === </span><span class="hl-6">&quot;string&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">result</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1"> | </span><span class="hl-8">undefined</span><span class="hl-1"> = </span><span class="hl-5">comands</span><span class="hl-1">.</span><span class="hl-3">check</span><span class="hl-1">(</span><span class="hl-5">argv</span><span class="hl-1">.</span><span class="hl-5">route</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-0">typeof</span><span class="hl-1"> </span><span class="hl-5">result</span><span class="hl-1"> === </span><span class="hl-6">&quot;undefined&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-6">`ERROR en la ruta`</span><span class="hl-1">);</span><br/><span class="hl-1">            }</span><span class="hl-7">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-6">`La ruta corresponde con un </span><span class="hl-0">${</span><span class="hl-5">result</span><span class="hl-0">}</span><span class="hl-6">`</span><span class="hl-1">);</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Comando &#39;mkdir&#39;: crea un nuevo directorio</span><br/><span class="hl-4"> */</span><br/><span class="hl-1"> </span><span class="hl-5">yargs</span><span class="hl-1">.</span><span class="hl-3">command</span><span class="hl-1">( {</span><br/><span class="hl-1">    </span><span class="hl-5">command:</span><span class="hl-1"> </span><span class="hl-6">&#39;mkdir&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Crea un directorio nuevo&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">builder:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">route:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Ruta en la que crea&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">demandOption:</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-3">handler</span><span class="hl-1">(</span><span class="hl-5">argv</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-0">typeof</span><span class="hl-1"> </span><span class="hl-5">argv</span><span class="hl-1">.</span><span class="hl-5">route</span><span class="hl-1"> === </span><span class="hl-6">&quot;string&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">result</span><span class="hl-1"> = </span><span class="hl-5">comands</span><span class="hl-1">.</span><span class="hl-3">mkdir</span><span class="hl-1">(</span><span class="hl-5">argv</span><span class="hl-1">.</span><span class="hl-5">route</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-5">result</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-6">`Directorio creado`</span><span class="hl-1">);</span><br/><span class="hl-1">            }</span><span class="hl-7">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-6">`ERROR. Creación directorio fallido`</span><span class="hl-1">);</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Comando &#39;ls&#39;: muestra los ficheros dentro de un directorio</span><br/><span class="hl-4"> */</span><br/><span class="hl-1"> </span><span class="hl-5">yargs</span><span class="hl-1">.</span><span class="hl-3">command</span><span class="hl-1">( {</span><br/><span class="hl-1">    </span><span class="hl-5">command:</span><span class="hl-1"> </span><span class="hl-6">&#39;ls&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Muestra el contenido de un directorio&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">builder:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">route:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Ruta de la que desea mostrar el contenido&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">demandOption:</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-3">handler</span><span class="hl-1">(</span><span class="hl-5">argv</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-0">typeof</span><span class="hl-1"> </span><span class="hl-5">argv</span><span class="hl-1">.</span><span class="hl-5">route</span><span class="hl-1"> === </span><span class="hl-6">&quot;string&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-5">comands</span><span class="hl-1">.</span><span class="hl-3">ls</span><span class="hl-1">(</span><span class="hl-5">argv</span><span class="hl-1">.</span><span class="hl-5">route</span><span class="hl-1">));</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Comando &#39;cat&#39;: muestra el contenido de un fichero</span><br/><span class="hl-4"> */</span><br/><span class="hl-1"> </span><span class="hl-5">yargs</span><span class="hl-1">.</span><span class="hl-3">command</span><span class="hl-1">( {</span><br/><span class="hl-1">    </span><span class="hl-5">command:</span><span class="hl-1"> </span><span class="hl-6">&#39;cat&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Muestra el contenido de un fichero&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">builder:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">route:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Ruta de la que desea mostrar el contenido&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">demandOption:</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-3">handler</span><span class="hl-1">(</span><span class="hl-5">argv</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-0">typeof</span><span class="hl-1"> </span><span class="hl-5">argv</span><span class="hl-1">.</span><span class="hl-5">route</span><span class="hl-1"> === </span><span class="hl-6">&quot;string&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-5">comands</span><span class="hl-1">.</span><span class="hl-3">cat</span><span class="hl-1">(</span><span class="hl-5">argv</span><span class="hl-1">.</span><span class="hl-5">route</span><span class="hl-1">));</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Comando &#39;remove&#39;: elimina un fichero o directorio</span><br/><span class="hl-4"> */</span><br/><span class="hl-1"> </span><span class="hl-5">yargs</span><span class="hl-1">.</span><span class="hl-3">command</span><span class="hl-1">( {</span><br/><span class="hl-1">    </span><span class="hl-5">command:</span><span class="hl-1"> </span><span class="hl-6">&#39;remove&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Elimina un fichero o directorio&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">builder:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">route:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Ruta de la que desea eliminar&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">demandOption:</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-3">handler</span><span class="hl-1">(</span><span class="hl-5">argv</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-0">typeof</span><span class="hl-1"> </span><span class="hl-5">argv</span><span class="hl-1">.</span><span class="hl-5">route</span><span class="hl-1"> === </span><span class="hl-6">&quot;string&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-5">comands</span><span class="hl-1">.</span><span class="hl-3">remove</span><span class="hl-1">(</span><span class="hl-5">argv</span><span class="hl-1">.</span><span class="hl-5">route</span><span class="hl-1">));</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Comando &#39;move&#39;: mueve el contenido de un origen a un destino</span><br/><span class="hl-4"> */</span><br/><span class="hl-1"> </span><span class="hl-5">yargs</span><span class="hl-1">.</span><span class="hl-3">command</span><span class="hl-1">( {</span><br/><span class="hl-1">    </span><span class="hl-5">command:</span><span class="hl-1"> </span><span class="hl-6">&#39;move&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Mueve un fichero o directorio&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">builder:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">routeO:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Ruta origen&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">demandOption:</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        </span><span class="hl-5">routeD:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Ruta destino&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">demandOption:</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-3">handler</span><span class="hl-1">(</span><span class="hl-5">argv</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-0">typeof</span><span class="hl-1"> </span><span class="hl-5">argv</span><span class="hl-1">.</span><span class="hl-5">routeO</span><span class="hl-1"> === </span><span class="hl-6">&quot;string&quot;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-0">typeof</span><span class="hl-1"> </span><span class="hl-5">argv</span><span class="hl-1">.</span><span class="hl-5">routeD</span><span class="hl-1"> === </span><span class="hl-6">&quot;string&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-5">comands</span><span class="hl-1">.</span><span class="hl-3">move</span><span class="hl-1">(</span><span class="hl-5">argv</span><span class="hl-1">.</span><span class="hl-5">routeO</span><span class="hl-1">, </span><span class="hl-5">argv</span><span class="hl-1">.</span><span class="hl-5">routeD</span><span class="hl-1">)</span><br/><span class="hl-1">            </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-6">`Contenido movido correctamente`</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><span class="hl-7">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-6">`ÈRROR en move`</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">/**</span><br/><span class="hl-4"> * Comando &#39;copy&#39;: copia el contenido en otro lugar</span><br/><span class="hl-4"> */</span><br/><span class="hl-1"> </span><span class="hl-5">yargs</span><span class="hl-1">.</span><span class="hl-3">command</span><span class="hl-1">( {</span><br/><span class="hl-1">    </span><span class="hl-5">command:</span><span class="hl-1"> </span><span class="hl-6">&#39;copy&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Copia un fichero o directorio&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">builder:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">routeO:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Ruta origen&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">demandOption:</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        </span><span class="hl-5">routeD:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">describe:</span><span class="hl-1"> </span><span class="hl-6">&#39;Ruta destino&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">demandOption:</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-6">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-3">handler</span><span class="hl-1">(</span><span class="hl-5">argv</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-0">typeof</span><span class="hl-1"> </span><span class="hl-5">argv</span><span class="hl-1">.</span><span class="hl-5">routeO</span><span class="hl-1"> === </span><span class="hl-6">&quot;string&quot;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-0">typeof</span><span class="hl-1"> </span><span class="hl-5">argv</span><span class="hl-1">.</span><span class="hl-5">routeD</span><span class="hl-1"> === </span><span class="hl-6">&quot;string&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-5">comands</span><span class="hl-1">.</span><span class="hl-3">copy</span><span class="hl-1">(</span><span class="hl-5">argv</span><span class="hl-1">.</span><span class="hl-5">routeO</span><span class="hl-1">, </span><span class="hl-5">argv</span><span class="hl-1">.</span><span class="hl-5">routeD</span><span class="hl-1">)</span><br/><span class="hl-1">            </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-6">`Contenido copiado correctamente`</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><span class="hl-7">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-6">`ÈRROR en copy`</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">yargs</span><span class="hl-1">.</span><span class="hl-3">parse</span><span class="hl-1">();</span>
</code></pre>
<ul>
<li><em>LComands.ts:</em></li>
</ul>
<p>Contiene las funciones necesarias que son llamadas desde el <code>main.ts</code>. Cada función corresponde a un posible comando:</p>
<ul>
<li>check(): Dada una ruta concreta, mostrar si es un directorio o un fichero. Se le pasa la ruta para analizar y devuelve como cadena si se trata de un directorio ó fichero, y en caso de error, devuelve <code>undefined</code>.</li>
</ul>
<pre><code><span class="hl-5">public</span><span class="hl-1"> </span><span class="hl-3">check</span><span class="hl-1">(</span><span class="hl-5">ruta</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">): </span><span class="hl-5">string</span><span class="hl-1"> | </span><span class="hl-0">undefined</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-0">this</span><span class="hl-1">.</span><span class="hl-5">fs</span><span class="hl-1">.</span><span class="hl-3">existsSync</span><span class="hl-1">(</span><span class="hl-5">ruta</span><span class="hl-1">)) {</span><br/><span class="hl-1">            </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-0">this</span><span class="hl-1">.</span><span class="hl-5">fs</span><span class="hl-1">.</span><span class="hl-3">lstatSync</span><span class="hl-1">(</span><span class="hl-5">ruta</span><span class="hl-1">).</span><span class="hl-3">isDirectory</span><span class="hl-1">()) {</span><br/><span class="hl-1">                </span><span class="hl-7">return</span><span class="hl-1"> </span><span class="hl-6">&quot;directorio&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">            }</span><span class="hl-7">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-7">return</span><span class="hl-1"> </span><span class="hl-6">&quot;fichero&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        } </span><span class="hl-7">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-7">return</span><span class="hl-1"> </span><span class="hl-0">undefined</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span>
</code></pre>
<ul>
<li>mkdir(): Crear un nuevo directorio a partir de una nueva ruta que recibe como parámetro. Devuelve <code>false</code> en caso de error y <code>true</code> si todo se ejecutó correctamente.</li>
</ul>
<pre><code><span class="hl-5">public</span><span class="hl-1"> </span><span class="hl-3">mkdir</span><span class="hl-1">(</span><span class="hl-5">ruta</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-0">this</span><span class="hl-1">.</span><span class="hl-5">fs</span><span class="hl-1">.</span><span class="hl-3">existsSync</span><span class="hl-1">(</span><span class="hl-5">ruta</span><span class="hl-1">)) {</span><br/><span class="hl-1">            </span><span class="hl-7">return</span><span class="hl-1"> </span><span class="hl-0">false</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><span class="hl-7">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-0">this</span><span class="hl-1">.</span><span class="hl-5">fs</span><span class="hl-1">.</span><span class="hl-3">mkdirSync</span><span class="hl-1">(</span><span class="hl-5">ruta</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-7">return</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span>
</code></pre>
<ul>
<li>ls(): Listar los ficheros dentro de un directorio. Primero se asegura que la ruta proporcionada corresponde a un directorio y después guarda el contenido para mostrarlo. En caso contrario, mostrará error.</li>
</ul>
<pre><code><span class="hl-5">public</span><span class="hl-1"> </span><span class="hl-3">ls</span><span class="hl-1">(</span><span class="hl-5">ruta</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-5">result</span><span class="hl-1"> = </span><span class="hl-6">&quot;&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-7">switch</span><span class="hl-1"> (</span><span class="hl-0">this</span><span class="hl-1">.</span><span class="hl-3">check</span><span class="hl-1">(</span><span class="hl-5">ruta</span><span class="hl-1">)) {</span><br/><span class="hl-1">            </span><span class="hl-7">case</span><span class="hl-1"> </span><span class="hl-6">&quot;directorio&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">                </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">ls</span><span class="hl-1"> = </span><span class="hl-3">spawn</span><span class="hl-1">(</span><span class="hl-6">&#39;ls&#39;</span><span class="hl-1">, [</span><span class="hl-5">ruta</span><span class="hl-1">]);</span><br/><span class="hl-1">                </span><span class="hl-5">ls</span><span class="hl-1">.</span><span class="hl-5">stdout</span><span class="hl-1">.</span><span class="hl-3">on</span><span class="hl-1">(</span><span class="hl-6">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-5">piece</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> </span><span class="hl-5">result</span><span class="hl-1"> = </span><span class="hl-5">result</span><span class="hl-1"> + </span><span class="hl-5">piece</span><span class="hl-1">);</span><br/><span class="hl-1">                </span><span class="hl-5">ls</span><span class="hl-1">.</span><span class="hl-5">stdout</span><span class="hl-1">.</span><span class="hl-3">on</span><span class="hl-1">(</span><span class="hl-6">&#39;close&#39;</span><span class="hl-1">, () </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                    </span><span class="hl-7">return</span><span class="hl-1"> </span><span class="hl-5">result</span><span class="hl-1">;</span><br/><span class="hl-1">                });</span><br/><span class="hl-1">                </span><span class="hl-7">break</span><span class="hl-1">;</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">            </span><span class="hl-7">case</span><span class="hl-1"> </span><span class="hl-6">&quot;fichero&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">                </span><span class="hl-5">result</span><span class="hl-1"> = </span><span class="hl-6">&quot;Imposible hacer ls sobre fichero.&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-7">break</span><span class="hl-1">;</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">            </span><span class="hl-7">case</span><span class="hl-1"> </span><span class="hl-0">undefined</span><span class="hl-1">: {</span><br/><span class="hl-1">                </span><span class="hl-5">result</span><span class="hl-1"> = </span><span class="hl-6">&quot;No existe la ruta.&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-7">break</span><span class="hl-1">;</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">            </span><span class="hl-7">default</span><span class="hl-1">: {</span><br/><span class="hl-1">                </span><span class="hl-5">result</span><span class="hl-1"> = </span><span class="hl-6">&quot;ERROR imprevisto.&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-7">break</span><span class="hl-1">;</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-7">return</span><span class="hl-1"> </span><span class="hl-5">result</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span>
</code></pre>
<ul>
<li>cat(): Mostrar el contenido de un fichero. Primero se asegura que la ruta proporcionada corresponde a un fichero y después guarda el contenido para mostrarlo. En caso contrario, mostrará error.</li>
</ul>
<pre><code><span class="hl-5">public</span><span class="hl-1"> </span><span class="hl-3">cat</span><span class="hl-1">(</span><span class="hl-5">ruta</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">let</span><span class="hl-1"> </span><span class="hl-5">result</span><span class="hl-1"> = </span><span class="hl-6">&quot;&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-7">switch</span><span class="hl-1"> (</span><span class="hl-0">this</span><span class="hl-1">.</span><span class="hl-3">check</span><span class="hl-1">(</span><span class="hl-5">ruta</span><span class="hl-1">)) {</span><br/><span class="hl-1">            </span><span class="hl-7">case</span><span class="hl-1"> </span><span class="hl-6">&quot;fichero&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">                </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">cat</span><span class="hl-1"> = </span><span class="hl-3">spawn</span><span class="hl-1">(</span><span class="hl-6">&#39;cat&#39;</span><span class="hl-1">, [</span><span class="hl-5">ruta</span><span class="hl-1">]);</span><br/><span class="hl-1">                </span><span class="hl-5">cat</span><span class="hl-1">.</span><span class="hl-5">stdout</span><span class="hl-1">.</span><span class="hl-3">on</span><span class="hl-1">(</span><span class="hl-6">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-5">piece</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> </span><span class="hl-5">result</span><span class="hl-1"> = </span><span class="hl-5">result</span><span class="hl-1"> + </span><span class="hl-5">piece</span><span class="hl-1">);</span><br/><span class="hl-1">                </span><span class="hl-5">cat</span><span class="hl-1">.</span><span class="hl-5">stdout</span><span class="hl-1">.</span><span class="hl-3">on</span><span class="hl-1">(</span><span class="hl-6">&#39;close&#39;</span><span class="hl-1">, () </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-7">return</span><span class="hl-1"> </span><span class="hl-5">result</span><span class="hl-1">;</span><br/><span class="hl-1">                });</span><br/><span class="hl-1">                </span><span class="hl-7">break</span><span class="hl-1">;</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">            </span><span class="hl-7">case</span><span class="hl-1"> </span><span class="hl-6">&quot;directorio&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">                </span><span class="hl-5">result</span><span class="hl-1"> = </span><span class="hl-6">&quot;Imposible hacer cat sobre directorio.&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-7">break</span><span class="hl-1">;</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">            </span><span class="hl-7">case</span><span class="hl-1"> </span><span class="hl-0">undefined</span><span class="hl-1">: {</span><br/><span class="hl-1">                </span><span class="hl-5">result</span><span class="hl-1"> = </span><span class="hl-6">&quot;No existe la ruta.&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-7">break</span><span class="hl-1">;</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">            </span><span class="hl-7">default</span><span class="hl-1">: {</span><br/><span class="hl-1">                </span><span class="hl-5">result</span><span class="hl-1"> = </span><span class="hl-6">&quot;ERROR imprevisto.&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-7">break</span><span class="hl-1">;</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-7">return</span><span class="hl-1"> </span><span class="hl-5">result</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span>
</code></pre>
<ul>
<li>remove(): Borrar ficheros y directorios. Invoca previamente a la función <code>check()</code> y en en función de lo que devuelva ejecutará el comando para eliminar fichero, directorio o retornará <code>false</code> en caso de error.</li>
</ul>
<pre><code><span class="hl-5">public</span><span class="hl-1"> </span><span class="hl-3">remove</span><span class="hl-1">(</span><span class="hl-5">ruta</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-7">switch</span><span class="hl-1"> (</span><span class="hl-0">this</span><span class="hl-1">.</span><span class="hl-3">check</span><span class="hl-1">(</span><span class="hl-5">ruta</span><span class="hl-1">)) {</span><br/><span class="hl-1">            </span><span class="hl-7">case</span><span class="hl-1"> </span><span class="hl-6">&quot;directorio&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">                </span><span class="hl-0">this</span><span class="hl-1">.</span><span class="hl-5">fs</span><span class="hl-1">.</span><span class="hl-3">rmdirSync</span><span class="hl-1">(</span><span class="hl-5">ruta</span><span class="hl-1">);</span><br/><span class="hl-1">                </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-6">`Direcorio eliminado correctamente`</span><span class="hl-1">);</span><br/><span class="hl-1">                </span><span class="hl-7">return</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1">;</span><br/><span class="hl-1">            </span><span class="hl-7">case</span><span class="hl-1"> </span><span class="hl-6">&quot;fichero&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">                </span><span class="hl-0">this</span><span class="hl-1">.</span><span class="hl-5">fs</span><span class="hl-1">.</span><span class="hl-3">rmSync</span><span class="hl-1">(</span><span class="hl-5">ruta</span><span class="hl-1">);</span><br/><span class="hl-1">                </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-6">`Fichero eliminado correctamente`</span><span class="hl-1">);</span><br/><span class="hl-1">                </span><span class="hl-7">return</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1">;</span><br/><span class="hl-1">            </span><span class="hl-7">default</span><span class="hl-1">: {</span><br/><span class="hl-1">                </span><span class="hl-7">return</span><span class="hl-1"> </span><span class="hl-0">false</span><span class="hl-1">;</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span>
</code></pre>
<ul>
<li>move(): Mueve un fichero/directorio de una ruta a otra. Crea un proceso hijo que ejecuta <code>mv</code> con los parámetros correspondientes y devuelve <code>true</code> si todo salió correcto o <code>false</code> en caso contrario.</li>
</ul>
<pre><code><span class="hl-5">public</span><span class="hl-1"> </span><span class="hl-3">move</span><span class="hl-1">(</span><span class="hl-5">rutaO</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">, </span><span class="hl-5">rutaD</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-0">this</span><span class="hl-1">.</span><span class="hl-5">fs</span><span class="hl-1">.</span><span class="hl-3">existsSync</span><span class="hl-1">(</span><span class="hl-5">rutaO</span><span class="hl-1">)) {</span><br/><span class="hl-1">            </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">mov</span><span class="hl-1"> = </span><span class="hl-3">spawn</span><span class="hl-1">(</span><span class="hl-6">&#39;mv&#39;</span><span class="hl-1">, [</span><span class="hl-5">rutaO</span><span class="hl-1">, </span><span class="hl-5">rutaD</span><span class="hl-1">]);</span><br/><span class="hl-1">            </span><span class="hl-5">mov</span><span class="hl-1">.</span><span class="hl-3">on</span><span class="hl-1">(</span><span class="hl-6">&#39;close&#39;</span><span class="hl-1">, () </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-7">return</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1">;</span><br/><span class="hl-1">            });</span><br/><span class="hl-1">        }</span><span class="hl-7">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-7">return</span><span class="hl-1"> </span><span class="hl-0">false</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span>
</code></pre>
<ul>
<li>copy(): Copia un fichero/directorio. Implementación similar a <code>move</code> pero, en este caso, invocamos como proceso hijo al comando <code>cp</code> con sus respectivos parámetros.</li>
</ul>
<pre><code><span class="hl-5">public</span><span class="hl-1"> </span><span class="hl-3">copy</span><span class="hl-1">(</span><span class="hl-5">rutaOr</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">, </span><span class="hl-5">rutaDe</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-7">if</span><span class="hl-1">(</span><span class="hl-0">this</span><span class="hl-1">.</span><span class="hl-5">fs</span><span class="hl-1">.</span><span class="hl-3">existsSync</span><span class="hl-1">(</span><span class="hl-5">rutaOr</span><span class="hl-1">)) {</span><br/><span class="hl-1">            </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">cop</span><span class="hl-1"> = </span><span class="hl-3">spawn</span><span class="hl-1">(</span><span class="hl-6">&#39;cp&#39;</span><span class="hl-1">, [</span><span class="hl-5">rutaOr</span><span class="hl-1">, </span><span class="hl-5">rutaDe</span><span class="hl-1">]);</span><br/><span class="hl-1">            </span><span class="hl-5">cop</span><span class="hl-1">.</span><span class="hl-3">on</span><span class="hl-1">(</span><span class="hl-6">&#39;close&#39;</span><span class="hl-1">, () </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-7">return</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1">;</span><br/><span class="hl-1">            });</span><br/><span class="hl-1">        }</span><span class="hl-7">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-7">return</span><span class="hl-1"> </span><span class="hl-0">false</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span>
</code></pre>
<p><strong>Nota</strong>: si ejecutas los test del ejercicio 4, debes restaurar al estado previo para poder volver a ejecutarlos.</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Modules</a></li><li class=" tsd-kind-module"><a href="modules/ejercicio3_P9_Nota.html">ejercicio3/<wbr/>P9/<wbr/>Nota</a></li><li class=" tsd-kind-module"><a href="modules/ejercicio3_P9_OpcionesNota.html">ejercicio3/<wbr/>P9/<wbr/>Opciones<wbr/>Nota</a></li><li class=" tsd-kind-module"><a href="modules/ejercicio4_LComands.html">ejercicio4/LComands</a></li><li class=" tsd-kind-module"><a href="modules/mod10_lectura.html">mod10/lectura</a></li><li class=" tsd-kind-module"><a href="modules/mod10_suma.html">mod10/suma</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>